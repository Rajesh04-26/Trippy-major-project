
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1NovOg6FN3" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="/css/booking.css">
  
  <!-- Navbar -->
<nav class="navbar navbar-expand-md sticky-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="/listings"><i class="fa-solid fa-plane-departure"></i></a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav">
        <a class="nav-link-head navbar-brand fw-bold" href="/listings">Trippy</a>
      </div>

      <div class="navbar-nav ms-auto">
        <a class="nav-link" aria-current="page" href="/">Home</a>
        <a class="nav-link" href="/listings">Explore</a>
        <a class="nav-link" href="/listings/new">Add new Trips</a>

        <% if(!currUser) { %>
        <a class="nav-link" href="/signup"><b>Sign Up</b></a>
        <a class="nav-link" href="/login"><b>Log in</b></a>
        <% } %>

        <% if(currUser) { %>
        <a class="nav-link" href="/listings/my-bookings#">Manage Booking</a>
        <a class="nav-link" href="/logout"><b>Log Out</b></a>
        <% } %>
      </div>
    </div>
  </div>
</nav>

  <main class="booking-main-content">
    <div class="row g-0 flex-grow-1">
      <section class="col-md-6 booking-form-column">
        <div class="booking-form-wrapper p-4 p-md-5">
          <h1>Book Your Adventure!</h1>
          <p class="subtitle">Secure your unforgettable experience with us.</p>
          <form action="/listings/<%= listing._id %>/checkout" method="POST">
            <div class="mb-3">
              <label for="checkIn" class="form-label">Check-in Date</label>
              <input type="date" id="checkIn" name="checkIn" class="form-control" required>
            </div>

            <div class="mb-3">
              <label for="checkOut" class="form-label">Check-out Date</label>
              <input type="date" id="checkOut" name="checkOut" class="form-control" required>
            </div>

            <div class="mb-3">
              <label for="name" class="form-label">Your Full Name</label>
              <input type="text" id="name" name="name" class="form-control" required placeholder="John Doe">
            </div>

            <div class="mb-3">
              <label for="email" class="form-label">Email Address</label>
              <input type="email" id="email" name="email" class="form-control" required placeholder="john.doe@example.com">
            </div>

            <div class="mb-3">
              <label for="phone" class="form-label">Phone Number</label>
              <input type="tel" id="phone" name="phone" class="form-control" required placeholder="+1 (555) 123-4567">
            </div>

            <div class="row mb-3 g-3">
              <div class="col-md-6">
                <label for="adults" class="form-label">Adults</label>
                <input type="number" id="adults" name="adults" class="form-control" value="1" min="1">
              </div>
              <div class="col-md-6">
                <label for="kids" class="form-label">
                  Kids <span class="discount-tag badge bg-success">10% OFF</span>
                </label>
                <input type="number" id="kids" name="kids" class="form-control" value="0" min="0">
              </div>
            </div>

            <div class="booking-summary mt-4 p-3 d-flex justify-content-between align-items-center bg-light rounded shadow-sm">
              <p class="mb-0 fs-5">Total Estimated Price:</p>
              <p class="mb-0 fs-4 text-primary"><strong>â‚¹<span id="total"><%= listing.price.toFixed(2) %></span></strong></p>
            </div>

            <button type="submit" class="booking-button btn btn-primary w-100 mt-4 py-3">COMPLETE YOUR BOOKING</button>
          </form>
        </div>
      </section>

      <!-- Right side image-->
      <aside class="col-md-6 image-column">
        <div class="image-box">
          <img src="/images/booking.jpg" alt="Beautiful Beach Destination" class="aside-image">
          <div class="image-overlay">
            <h3>Your Dream Vacation Awaits!</h3>
            <p>Experience pristine beaches, vibrant cultures, and unforgettable adventures.</p>
          </div>
        </div>
      </aside>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer-modern-ejs mt-auto">
    <div class="container py-5">
        <div class="row g-4">

            <!-- Column 1: Logo and Company Info -->
            <div class="col-lg-3 col-md-6 mb-4">
                <div class="text-center text-md-start">
                     <div class="mb-3">
                        <h4><i class="fa-solid fa-plane-departure"></i>&nbsp;&nbsp;Trippy</h4>
                    </div>
                    <p>Trippy is your premium travel companion, curating unforgettable journeys with luxury, comfort, and ease at every step.</p>
                    <p class="mb-1"><i class="fas fa-map-marker-alt me-2"></i>123 Dreamy Lane, Serene City, LS 78901</p>
                    <p class="mb-1"><i class="fas fa-envelope me-2"></i>info@Trippy.com</p>
                    <p><i class="fas fa-phone-alt me-2"></i>+1 (555) 123-4567</p>
                </div>
            </div>

            <!-- Column 2: Quick Links -->
            <div class="col-lg-3 col-md-6 mb-4">
                <h4>Quick Links</h4>
                <ul class="list-unstyled">
                    <li class="mb-2"><a href="/" class="text-white">Home</a></li>
                    <li class="mb-2"><a href="/about" class="text-white">About Us</a></li>
                    <li class="mb-2"><a href="/services" class="text-white">Services</a></li>
                    <li class="mb-2"><a href="/products" class="text-white">Products</a></li>
                    <li class="mb-2"><a href="/contact" class="text-white">Contact</a></li>
                </ul>
            </div>

            <!-- Column 3: Feedback Form -->
            <div class="col-lg-3 col-md-6 mb-4">
                <h4>Send Us Feedback</h4>
                <form action="#" method="POST">
                    <div class="mb-3">
                        <input type="email" class="form-control form-control-custom" name="email" placeholder="Your Email" required>
                    </div>
                    <div class="mb-3">
                        <textarea class="form-control form-control-custom" name="message" rows="4" placeholder="Your Message" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Submit Feedback</button>
                </form>
            </div>

            <!-- Column 4: Social Media -->
            <div class="col-lg-3 col-md-6 mb-4">
                <h4>Connect With Us</h4>
                <div class="social-icons-ejs d-flex justify-content-center justify-content-md-start gap-3 mb-3">
                    <a href="#"><i class="fa-brands fa-facebook-square"></i></a>
                    <a href="#"><i class="fa-brands fa-instagram-square"></i></a>
                    <a href="#"><i class="fa-brands fa-linkedin"></i></a>
                    <a href="#"><i class="fa-brands fa-twitter-square"></i></a>
                </div>
                <p>Follow us on social media for exciting updates!</p>
            </div>
        </div>

        <!-- Bottom Bar -->
        <div class="row footer-bottom-ejs text-center pt-3">
            <div class="col-12">
                <div class="footer-bottom-links mb-2">
                    <a href="/privacy" class="mx-2">Privacy Policy</a>
                    <a href="/terms" class="mx-2">Terms of Service</a>
                    <a href="/sitemap" class="mx-2">Sitemap</a>
                </div>
                <div class="f-info-brand">&copy; 2025 LuxeNest Private Limited. All rights reserved.</div>
            </div>
        </div>
    </div>
  </footer>

  <!-- Bootstrap JS Bundle -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

  <script>
    const pricePerPerson = Number("<%= listing.price %>");
    const adultsInput = document.getElementById("adults");
    const kidsInput = document.getElementById("kids");
    const totalEl = document.getElementById("total");
    const checkInInput = document.getElementById("checkIn");
    const checkOutInput = document.getElementById("checkOut");

    // Set min date for check-in to today
    const today = new Date().toISOString().split('T')[0];
    checkInInput.setAttribute('min', today);

    checkInInput.addEventListener('change', function() {
      if (this.value) {
        checkOutInput.setAttribute('min', this.value);
        if (checkOutInput.value < this.value) {
          checkOutInput.value = this.value;
        }
      }
    });

    function updateTotal() {
      const adults = parseInt(adultsInput.value) || 0;
      const kids = parseInt(kidsInput.value) || 0;

      const adultTotal = adults * pricePerPerson;
      const kidTotal = kids * (pricePerPerson * 0.9);
      const total = adultTotal + kidTotal;

      totalEl.textContent = total.toFixed(2);
    }

    document.addEventListener('DOMContentLoaded', updateTotal);
    adultsInput.addEventListener("input", updateTotal);
    kidsInput.addEventListener("input", updateTotal);
  </script>
</body>
</html>